# Ansible Configuration
# Copy to project root as ansible.cfg
# See: https://docs.ansible.com/ansible/latest/reference_appendices/config.html

[defaults]
# Inventory
inventory = inventories/production/hosts.yml

# Roles path (search local roles first, then Galaxy)
roles_path = roles:~/.ansible/roles

# SSH host key checking (enable for security)
host_key_checking = True

# Disable retry files (.retry files on failure)
retry_files_enabled = False

# Performance: Increase parallelism (default is 5)
forks = 20

# Fact gathering strategy
gathering = smart
fact_caching = jsonfile
fact_caching_connection = .ansible_cache
fact_caching_timeout = 86400  # 24 hours

# Output format
stdout_callback = yaml
callbacks_enabled = profile_tasks, timer

# Timeout for gathering facts
gather_timeout = 30

# Connection timeout
timeout = 30

# Enable vars plugins
vars_plugins_enabled = host_group_vars,community.sops.sops

[privilege_escalation]
# Privilege escalation (disabled by default - use become: true in tasks)
become = False
become_method = sudo
become_user = root
become_ask_pass = False

[ssh_connection]
# SSH pipelining for performance (2-5x faster)
pipelining = True

# SSH multiplexing for connection reuse
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=yes

# Transfer method (smart, sftp, scp, piped)
transfer_method = smart

[inventory]
# Enable dynamic inventory plugins
enable_plugins = yaml, host_list, amazon.aws.aws_ec2, azure.azcollection.azure_rm

# Ignore inventory patterns
ignore_patterns = .git, .github, vault

[diff]
# Always show diffs
always = False

# Context lines for diffs
context = 3
